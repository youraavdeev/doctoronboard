<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <link rel="stylesheet" href="stylev1.css">
    <link rel="stylesheet" href="secondStyle.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" crossorigin="anonymous">
    <!--<script type="text/javascript" src="https://github.com/jquery-validation/jquery-validation/blob/master/src/localization/messages_ru.js"></script>-->
    <script type="text/javascript" src="cities/cities.js"></script>
    <title>Doctor on board</title>
</head>

<body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <header id='menu-container'>
        <div class="container" id='menu-container-2'>
            <div class="menu">
                <div class="header___logo">
                    <a href=""><img id="logo" src="img/header-logo.png"></a>
                </div>
                <nav id="menu-main">
                    <div class="topnav" id="myTopnav">
                        <!-- <a href="#" style="margin-left: 0px;">О сайте</a> -->
                        <a href="#second_anchor" style="margin-left: 0px;">Сервис</a>
                        <a href="#footer_anchor">Контакты</a>
                        <a href="#" id="enter">Вход</a>
                        <a href="#" id="menu" class="icon">
                            <img src="img/menu.png" height="25" class="d-inline-block align-center" alt="logo">
                        </a>
                        <!--<a href="#" onclick="menu();" id="menu" class="icon">&#9776</a>-->
                    </div>
                </nav>
                <div id="enter-modal" class="modal">

                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <div id="input">
                            <input id="input_mail" type="text" name="mail" placeholder="Адрес электронной почты">
                            <input id="input_pass" placeholder="Пароль" type="password" name="password">
                            <a href="" style="text-decoration: underline;">Забыли пароль?</a>
                        </div>
                    </div>
                </div>
                <script type="text/javascript">
                    var modal = document.getElementById("enter-modal");
                    var btn = document.getElementById("enter");
                    var span = document.getElementsByClassName("close")[0];
                    btn.onclick = function() {
                        modal.style.display = "block";
                        $('#input_mail').css({
                            "display": "block"
                        })
                        $('#input_pass').css({
                            "display": "block"
                        })
                        $('#input').css({
                            "display": "block"
                        })
                    }
                    span.onclick = function() {
                        modal.style.display = "none";
                    }
                </script>
                <div id="input">
                    <input id="input_mail" type="text" name="mail" placeholder="Адрес электронной почты">
                    <input id="input_pass" placeholder="Пароль" type="password" name="password">
                    <a href="" style="text-decoration: underline; padding-left: 10px; color: #00afc9;">Забыли
						пароль?</a>
                </div>
            </div>

        </div>
        <div class="mobile_snipet">
            <div id="mobile_menu">
                <!-- <a href="#" style="margin-left: 0px;">О сайте</a> -->
                <a href="#second_anchor" style="margin-left: 0px;">Сервис</a>
                <a href="#footer_anchor">Контакты</a>
            </div>
            <div id="mobile_enter_form">
                <div style="width:90%; margin:5% 5% 2%; text-align:center;">
                    <input id="input_mail" type="text" name="mail" placeholder="Адрес электронной почты">
                    <input id="input_pass" placeholder="Пароль" type="password" name="password">
                    <!--<a href="" style="text-decoration: underline;">Забыли пароль?</a>-->
                    <a href="#" id="button-enter-mobile">Войти</a>
                </div>
            </div>
            <div class="mobile_help_links">
                <a href="" style="text-decoration: underline;">Забыли пароль?</a>
                <a href="" style="text-decoration: underline;">Зарегистрироваться</a>
            </div>
        </div>
        <style>

        </style>
    </header>
    <main>
        <div class="first___section">
            <div class="thmoon-background"></div>
            <div class="mobile_zero_section">
                <section id="zero_left">
                    Уважаемый коллега, с помощью сервиса DoctorOnBoard Вы вовремя узнаете о негативных постах в соцмедиа и СМИ, оперативно поблагодарите ваших пациентов за положительные отзывы.
                    <br>
                    <div>
                        <span>
							<a href="#second_anchor">Подробнее</a>
							<img src="img/airplane.png" height="20" alt="airplane">
						</span>
                    </div>
                </section>
                <section id="zero_right">
                    <img src="img/doctor.png" alt="airplane">
                </section>
            </div>



            <img id="doctor" src="/img/doctor.png">

            <div style="display:flex;height: 100%;margin-left: auto; margin-right: auto;">
                <div id="service">

                    <h1>DoctorOnBoard</h1>
                    <br>
                    <div class="text-first-section">

                        Уважаемый коллега, с помощью сервиса DoctorOnBoard Вы вовремя узнаете о негативных постах в соцмедиа и СМИ, оперативно поблагодарите ваших пациентов за положительные отзывы.
                    </div>
                    <br>
                    <div id="second-text" class="text-first-section">
                        DoctorOnBoard мониторит упоминания во всех ведущих социальных сетях, а также специализированных сайтах по сбору отзывов о врачах, и позволяет вам контролировать свою репутацию онлайн.
                    </div>
                    <br>
                    <div class="text-first-section">
                        Получайте отчёты на Ваш емайл бесплатно.

                    </div>
                    <br>
                    <a href="#second_anchor" id="button-info">Подробнее</a>

                </div>
                <div id="register">

                    <div class='thmoon-register-title'>
                        Регистрация
                    </div>
                    <div class="thmoon-indicator-wrapper">
                        <div id='thmoon-indicator'>
                            1/3
                        </div>
                        <div id="thmoon-indicator-title">
                            Чтобы вас найти
                        </div>
                    </div>
                    <form id="thmoon-form" method="GET" action="https://api2.doctoronboard.ru:22222">
                        <div class='thmoon-tab'>
                            <div>
                                Фамилия <span class="thmoon-pezd">*</span>
                            </div>
                            <input class='thmoon-input thmoon-input-req' name='lastname' placeholder="Укажите Вашу фамилию">

                            <div>
                                Имя <span class="thmoon-pezd">*</span>
                            </div>
                            <input class='thmoon-input thmoon-input-req' name='firstname' placeholder="Укажите Ваше имя">

                            <div>
                                Отчество
                            </div>
                            <input class='thmoon-input' name='middlename' placeholder="Укажите Ваше отчество">
                        </div>
                        <div class='thmoon-tab'>
                            <div>
                                Город <span class="thmoon-pezd">*</span>
                            </div>
                            <input class='thmoon-input thmoon-input-req thmoon-input-city' name='city' placeholder="Укажите Ваш город" list="thmoon-city-array" id="thmoon-input-city" type="text">
                            <datalist id="thmoon-city-array"><select id="thmoon-city-array-select"></select></datalist>
                            <div class="thmoon-spec-wrapper-222">
                                <div class="thmoon-spec-wrapper">
                                    <div>
                                        Спецальность <span class="thmoon-pezd">*</span>
                                    </div>
                                    <div class="thmoon-spec-container">
                                        <img src="/img/Magnifying_glass_icon.svg" width="18px" height="18px" class='thmoon-search-img' />
                                        <select id="input_speciality" class='thmoon-input-spec-awd' name='spec' placeholder="Поиск по названию">
                                    </select>
                                    </div>
                                </div>
                            </div>


                            <div>
                                Дополнительная специальность
                            </div>
                            <div class="thmoon-spec-container-2">
                                <select id="speciality-2" class='thmoon-input' name='dopspec' placeholder="Укажите Вашу доп. специальность"></select>
                            </div>
                        </div>
                        <div class='thmoon-tab'>
                            <div>
                                Email <span class="thmoon-pezd">*</span>
                            </div>
                            <input type="email" class='thmoon-input thmoon-input-req thmoon-email-input' name='email' placeholder="Укажите Ваш Email">

                            <!-- <div>
                                Телефон <span class="thmoon-pezd">*</span>
                            </div>
                            <input id="thmoon-tel-input" class='thmoon-input thmoon-input-req thmoon-tel-input' name='phone' placeholder="Укажите Ваш телефон"> -->
                        </div>
                    </form>
                    <div id='thmoon-control-buttons' class='thmoon-control-buttons'>
                        <div>
                            <div id='thmoon-nextBtn' class='thmoon-nextBtn' onclick="nextPrev(1)">Далее</div>
                        </div>
                        <div>
                            <div id='thmoon-prevBtn' onclick="nextPrev(-1)">← <span class="thmoon-underline">Назад</span>
                            </div>
                        </div>
                    </div>
                    <br>
                    <br>
                    <div id="ofert">
                        Нажимая на кнопку «Начать пользоваться», вы даете <a href="/docs/Soglasie_na_obrabotku_PD_1.doc">согласие
						</a> на обработку персональных данных.
                    </div>
                    <div id="results"></div>
                </div>
            </div>
        </div>
        <div class="two___section" id="second_anchor">

            <div id="scan">
                <h1 style="text-align: center;">DoctorOnBoard</h1>
                <div class="text-first-section" style="text-align: center;">
                    С помощью сервиса DoctorOnBoard вы вовремя узнаете о негативных постах в соцмедиа и СМИ, оперативно поблагодарите ваших пациентов за положительные отзывы.
                </div>
                <a href="#" id="button-scan">Сканировать</a>
            </div>
        </div>
    </main>
    <footer id="footer_anchor">
        <div id="footer-container" class="container" style="display: flex">
            <div class="left-item">
                <div id="a-footer">
                    <a href="#" style="border: 0; margin-right: 1%;">О сайте </a>
                    <a href="/docs/Polzovatelskoe_soglashenie_MK.doc" style="padding-left: 1%; margin-right: 1%;">Пользовательское соглашение </a>
                    <a href="/docs/Politika_v_oblasti_obrabotki_PD_MK.doc" style="padding-left: 1%;">Политика конфиденциальности </a>
                </div>
                <br>
                <div class="footer-text">
                    Сайт DoctorOnBoard предназначен исключительно для работников здравоохранения, имеющих высшее медицинское образование. Зарегистрировавшись на сайте, Вы подтверждаете, что являетесь работником здравоохранения с высшим медицинским образованием, что Вы ознакомились
                    с текстом пользовательского соглашения и поняли его.
                </div>
                <br>
            </div>
            <div class="right-item">
                <div id="right-age-item">18+</div>
            </div>
        </div>
    </footer>
    <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Спасибо за регистрацию!</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
                </div>
                <div class="modal-body">
                    Мы пришлем подтверждение на ваш Email.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Закрыть</button>
                </div>
            </div>
        </div>
    </div>

    <style>
        .mobile_snipet {
            display: none;
            width: 100%;
            position: absolute;
            top: 6.7%;
            z-index: 2;
            padding: 5% 0;
            background-color: white;
            margin-top: 13%;
            z-index: -1 !important;
        }
        
        #mobile_menu {
            display: flex;
            justify-content: space-around;
        }
        
        #mobile_menu a {
            color: black !important;
        }
        
        #button-enter-mobile {
            margin-left: 10px;
            color: white;
            background-color: #00afc9;
            font-family: 'PFDinTextPro-Light';
            font-weight: 800;
            border-radius: 5px;
            padding: 10px 6%;
            height: 32px;
            font-size: 0.9em;
        }
        
        .mobile_help_links {
            width: 90%;
            margin: 0 5%;
            display: flex;
            justify-content: space-between;
            display: none;
        }
        
        .mobile_help_links a {
            font-size: 0.9em;
        }
        
        .mobile_zero_section {
            /*display: flex;*/
            display: none;
            width: 90%;
            padding-top: 20px;
            margin-left: 5%;
            margin-right: 5%
        }
        
        #zero_left {
            /*display: inline-block;*/
            width: 55%;
            color: black;
        }
        
        #zero_left div {
            margin-top: 15px;
        }
        
        #zero_left a {
            color: black;
            text-decoration: underline;
            margin-right: 7px;
        }
        
        #zero_right {
            /*display: inline-block;*/
            width: 35%;
            text-align: right;
            padding-right: 50px;
        }
        
        #zero_right img {
            /*vertical-align: middle!important;*/
            height: 270px;
            width: auto
        }
        
        @media screen and (max-width: 1280px) {
            .mobile_snipet {
                margin-top: 8%;
                z-index: 50;
            }
            #doctor {
                display: block;
                right: calc(50% - 8rem);
                width: 28%;
            }
            #service {
                margin-left: 3%;
            }
            #register {
                margin-right: 3%;
            }
        }
        
        @media screen and (max-width: 1100px) {
            .mobile_snipet {
                margin-top: 8.2%;
            }
        }
        
        @media screen and (max-width: 1000px) {
            .mobile_snipet {
                top: 20%;
            }
        }
        
        @media screen and (max-width: 1100px) and (min-height: 1360px) {
            .mobile_snipet {
                top: 6.7%;
            }
        }
        
        @media screen and (max-width: 800px) {
            #doctor {
                display: none;
            }
            .mobile_snipet {
                margin-top: 8%;
            }
        }
        
        @media screen and (max-width: 750px) {
            .mobile_snipet {
                top: 20%;
            }
        }
        
        @media screen and (max-width: 450px) {
            .mobile_snipet {
                margin-top: 8%;
            }
            #button-enter-mobile {
                margin-left: 0;
            }
        }
        
        @media screen and (max-width: 350px) {
            #button-enter-mobile {
                margin-left: 0 !important;
            }
            #zero_right {
                display: none;
            }
            #zero_left {
                width: 100%;
            }
            #register {
                margin-top: 10px;
            }
            #scan {
                font-size: 0.7rem !important;
                margin-top: 70% !important;
            }
        }
    </style>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.1/dist/jquery.validate.js"></script>
    <script src="register.js"></script>
    <script src="spec_render.js"></script>
    <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> -->
    <script type="text/javascript" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/3/jquery.inputmask.bundle.js"></script>
    <script>
        $(document).ready(function() {
            $('#menu').click(function() {
                // e.stopPropagation();
                $('.mobile_snipet').slideToggle();
                if ($('#menu img').attr('src') == 'img/menu.png') $('#menu img').attr('src', 'img/close.png');
                else $('#menu img').attr('src', 'img/menu.png');
            });
        });
    </script>
    <script>
        var currentTab = 0;
        const INDICATOR_TITLE_ARR = ['Чтобы найти отзывы о Вас', 'Чтобы не перепутать с тёской', 'Для оповещения о новых отзывах'];
        showTab(currentTab);
        document.getElementById('ofert').hidden = true;
        $(":input").inputmask();
        $("#thmoon-tel-input").inputmask({
            "mask": "+7 (999) 999-99-99"
        });

        function showTab(n) {
            var x = document.getElementsByClassName("thmoon-tab");
            document.getElementById("thmoon-nextBtn").className = "thmoon-nextBtn";
            document.getElementById("thmoon-control-buttons").className = 'thmoon-control-buttons';
            x[n].style.display = "block";
            if (n == 0) {
                document.getElementById("thmoon-prevBtn").style.display = "none";
            } else {
                document.getElementById("thmoon-prevBtn").style.display = "block";
            }
            if (n == (x.length - 1)) {
                document.getElementById("thmoon-nextBtn").innerHTML = "Начать Пользоваться";
                document.getElementById("thmoon-nextBtn").className = "thmoon-begin-button";
                document.getElementById("thmoon-control-buttons").className = '';
            } else {
                document.getElementById("thmoon-nextBtn").innerHTML = "Далее";
            }
            document.getElementById("thmoon-indicator").innerHTML = (n + 1) + '/' + x.length;
            document.getElementById("thmoon-indicator-title").innerText = INDICATOR_TITLE_ARR[n];
        }

        function nextPrev(n) {
            var x = document.getElementsByClassName("thmoon-tab");
            if (n == 1 && !validateForm()) {
                return false;
            }
            if (currentTab + n >= x.length) {
                const arr = [...document.getElementsByClassName('thmoon-input'), ...document.getElementsByClassName('thmoon-input-spec-awd')];
                const result = {};

                arr.forEach(el => {
                    result[el.name] = el.value;
                })
                $.ajax({
                    url: 'https://doctoronboard.ru/api.php/',
                    crossDomain: true,
                    dataType: 'script',
                    type: 'GET',
                    data: result,
                    success: function() {
                        $("#modal").modal('show');
                        $('input').val('');
                        $('select').val('');
                    },
                    error: function() {
                        alert('error!');
                    },
                });
                // nextPrev(-1);
                // nextPrev(-1);
                document.getElementsByClassName('thmoon-register-title')[0].innerText = 'Спасибо за регистрацию';

                document.getElementsByClassName('thmoon-indicator-wrapper')[0].style.display = 'none';
                document.getElementById('thmoon-form').style.display = 'none';
                document.getElementById('thmoon-control-buttons').style.display = 'none';
                document.getElementById('ofert').style.display = 'none';


                return false;
            } else {
                x[currentTab].style.display = "none";
                currentTab = currentTab + n;
            }
            showTab(currentTab);
            if (currentTab < 2) {
                document.getElementById('ofert').hidden = true;
            } else {
                document.getElementById('ofert').hidden = false;
            }
        }

        function validateForm() {
            var x, y, i, valid = true;
            x = document.getElementsByClassName("thmoon-tab");
            y = x[currentTab].getElementsByClassName("thmoon-input-req");
            for (i = 0; i < y.length; i++) {
                if (y[i].value == "") {
                    y[i].className += " thmoon-invalid";
                    valid = false;
                }
            }
            const tel = x[currentTab].getElementsByClassName('thmoon-tel-input')[0];
            const email = x[currentTab].getElementsByClassName('thmoon-email-input')[0];
            let emailValidated = true;
            let telValidated = true;
            const city = x[currentTab].getElementsByClassName('thmoon-input-city')[0];
            let cityValidated = true;
            if (email) {
                emailValidated = validateEmail(email.value);
                if (!emailValidated) {
                    email.className += " thmoon-invalid";
                } else {
                    email.className = "thmoon-input thmoon-input-req thmoon-email-input";
                }
            }
            if (tel) {
                telValidated = validateTel(tel.value);
                if (!telValidated) {
                    tel.className += " thmoon-invalid";
                } else {
                    tel.className = "thmoon-input thmoon-input-req thmoon-tel-input";
                }
            }
            if (city) {
                cityValidated = validateCity(city.value);
                if (!cityValidated) {
                    city.className += " thmoon-invalid";
                } else {
                    city.className = "thmoon-input thmoon-input-req thmoon-input-city";
                }
            }
            return valid && telValidated && emailValidated && cityValidated;
        }

        function validateEmail(email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(String(email).toLowerCase());
        }

        function validateTel(tel) {
            var re = /^[+7\s]*[(]{0,1}[0-9]{1,4}[)][-\s\./0-9]*$/im;
            return re.test(String(tel).toLowerCase());
        }

        function validateCity(city) {
            return !!cityArr.find(c => c === city);
        }

        //thmoon-city-array
        const cityArr = cities.map(obj => obj.city);
        cityArr.forEach(city => {
            const node = document.createElement('option');
            node.value = city;
            document.getElementById('thmoon-city-array').appendChild(node);
            document.getElementById('thmoon-city-array-select').appendChild(node);
        });

        document.getElementById('thmoon-input-city').onkeydown = (event) => {
            if (!cityArr.find(city => city.toLowerCase().includes((event.target.value + event.key).toLowerCase())) &&
                event.key !== 'Backspace' &&
                event.key >= 'а' && event.key <= 'я'
            ) {
                event.preventDefault();
            }
        }
    </script>
</body>

</html>